<!DOCTYPE html>
<html>
<head>
<style>
table, th, td{
  border: 1px solid black;

}


table {
    table-layout:fixed;
}
table td {
    width: 45px;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: bold;
    text-align: center;
    font-size: 40px;
}

.one {
    color: blue;
}
.two {
    color: green;
}
.three {
    color: red;
}
.four {
    color: purple;
}
.five {
    color: maroon;
}
.six {
    color: turquoise;
}
.seven {
    color: black;
}
.eight {
    color: gray;
}

.cellButton {
  font-size: 30px;
  width: 45px;
  height: 50px;
  margin:0px 0px 0px 0px;
  align-content: center;
}
.zero {
  width: 45px;
  height: 45px;
}
</style>

</head>
<body id = "body">
<button onclick="easyMode()">Easy</button>
<button onclick="mediumMode()">Medium</button>
<button onclick="hardMode()">Hard</button>
<table id="myTable">

</table>
</body>
</html>
<script type="text/javascript">
  var n = 10;
//debugger
function easyMode() {
  n = 5;
  initialize(n);
};
function mediumMode() {
  n = 10;
  initialize(n);
};
function hardMode() {
  n = 15;
  initialize(n);
};
  var bombs;
  var flags;
  var myTable = document.getElementById("myTable");
  var bombs = new Array(n).fill(0).map(() => new Array(n).fill(0));
  var flags = new Array(n).fill(0).map(() => new Array(n).fill(0));
  console.log(bombs);
function initialize(n)
{
  var table = document.getElementById("myTable");
  table.innerHTML = "";
  bombs = new Array(n).fill(0).map(() => new Array(n).fill(0));
  flags = new Array(n).fill(0).map(() => new Array(n).fill(0));
  for (var i = 0; i < n; i++) 
  {
    var tableRow = document.createElement("tr");
    tableRow.setAttribute("id", i);
    for (var j = 0; j < n; j++) 
    {
      var tableData = document.createElement("td");
      tableData.setAttribute("id", i+"."+j);
      //tableData.setAttribute("class",);
      tableData.innerHTML ='<div style = "align: center"><button type="button" class="cellButton" height:"40" width:"40" onclick="cellClicked('+i+','+j+')" oncontextmenu="cellRightClicked('+i+','+j+'); return false;" id = "b'+ i +'.'+ j +'" >&nbsp</button></div>';
      tableRow.appendChild(tableData);
      tableData.style.align = "center";
    }
    myTable.appendChild(tableRow);
  }
  initializeBombs(bombs, n, n, n * 2);
}


function showBomb (row, column) {
    var bomb = document.getElementById(row + "." + column);
    bomb.innerHTML = "<div class = 'cellButton'> <img src='https://storage.googleapis.com/replit/images/1545220146051_48f373ca2fe75d80cde9b1235a088351.pn' width = '40px' height = '40px align = 'center'> </div>";
};
function showNumber (row, column, number) {
    var cell = document.getElementById(row + "." + column);
    var wordForm;

    if (number == 1) {
      wordForm = "one";
    } else if (number == 2) {
        wordForm = "two";
      }
      else if (number == 3) {
        wordForm = "three";
      }
      else if (number == 4) {
        wordForm = "four";
      }
      else if (number == 5) {
        wordForm = "five";
      }
      else if (number == 6) {
        wordForm = "six";
      }
      else if (number == 7) {
        wordForm = "seven";
      }
      else if (number == 8) {
        wordForm = "eight";
      }
      
      if (number >= 1) {
        cell.innerHTML = "<div class = " + wordForm + ">" + number + "</div>";
      } else {
        cell.innerHTML = "<div class = 'zero' > </div>";
      };
      

};
function initializeBombs (bombs, rows, columns, bombCount) {
   //remember to exclude squares that already have bombs
   var bombRow;
   var bombColumn;
   console.log(bombs);
  for (var i = 0; i < bombCount; i++) {
    bombRow = Math.floor(Math.random() * n);
    bombColumn = Math.floor(Math.random() * n);
    bombs[bombRow][bombColumn] = 1;
    console.log(bombRow + " " + bombColumn + "\n");
    console.log(bombs);
  }
    console.log(bombs);
};

function cellClicked (row, column) {
    var i, j, k, l;
    debugger
    if (flags[row][column] == 1) {
      return;
    };
    if (bombs[row][column] == 1) 
    {
      displayBombs(bombs, n, n);
      alert("GAME OVER");

    } 
    else 
    {

      var bombCount = 0;

      for (i = row - 1; i <= row + 1 && i < n; i++) 
      {
        if (i >= 0) 
        {
          for (j = column - 1; j <= column + 1 && j < n; j++) 
          {
            if (j >= 0) 
            {
              if (bombs[i][j] == 1) 
              {
                bombCount++;
                
              };
            }; 
          };
        };
      };
      showNumber(row, column, bombCount);
      bombs[row][column] = 2;

      if (bombCount == 0) 
      {
        for (k = row - 1; k <= row + 1 && k < n; k++) 
        {
          if (k >= 0 ) {
            for (l = column - 1; l <= column + 1 && l < n; l++) 
            {
              if (l >= 0 )
              {
                if(bombs[k][l] == 0)
                  cellClicked(k, l);
              };
            };  
          };  
        };
      };
    };
      var gameStatus = isGameOver(bombs);
      if (gameStatus == true) 
      {
          alert("YOU WIN");
      };   
};
function cellRightClicked (row, column) 
{
  //debugger
  var button =  document.getElementById("b"+ row +'.'+ column);
  if (flags[row][column] == 0) 
  {//if there is not a flag already in the cell that was clicked then show a flag
    button.innerHTML = "<img src='https://s3.us-east-2.amazonaws.com/upload-icon/uploads/icons/png/15574596561537355607-256.png' height='30' width='30' class='center'>";
    flags[row][column] = 1;
  } 
  else 
  {//else if there is a flag then remove the flag from that cell
    button.innerHTML = "&nbsp";
    flags[row][column] = 0;
  };

};

function isGameOver (grid) 
{
  for (var i = 0; i < n; i++) 
  {
      for (var j = 0; j < n; j++) 
      {
          if (grid[i][j] == 0) 
          {
            return false;

          }; 
      };
  };
  return true;
};
  
function displayBombs (bombs, rows, columns) {
  console.log(bombs);
for (var i = 0; i < rows; i++) {
  for (var j = 0; j < columns; j++) {
    if (bombs[i][j] == 1) {
      showBomb(i, j);
    
    };
  }
}

};

initialize(n);

</script>









